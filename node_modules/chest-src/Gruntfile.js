var chest = require('./chest.js');

module.exports = function(grunt) {
  var chestfiles = [
    'src/jmap.js',
    'src/extend.js',
    'src/zipcookie.js',
    'src/module.js'
  ];
  grunt.initConfig({
    uglify: {
      chest: {
        options: {
          beautify:{ indent_level:2, beautify:true },
          mangle:false,
          compress:false,
          enclose: true
        },
        files: { 'bin/chest.js' : chestfiles }
      },
      min: {
        options: {
          mangle:true,
          compress:true,
          enclose: true
        },
        files: { 'bin/chest.min.js' : chestfiles }
      }
    },
  });

  this.loadNpmTasks('grunt-contrib-uglify');
  return this.registerTask('default', ['uglify:chest','uglify:min']);
};
